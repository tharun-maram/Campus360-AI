{% extends "base.html" %}

{% block content %}
<h2 class="fw-bold text-dark mb-2">Code Practice ðŸ’»</h2>
<p class="lead text-muted mb-5">Practice coding challenges with our integrated compiler and get instant feedback.</p>

<div class="row">
    <div class="col-md-8">
        <form method="POST" action="{{ url_for('compiler') }}" class="mb-4">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-white d-flex justify-content-between align-items-center p-3 border-bottom-0" style="border-top-left-radius: 12px; border-top-right-radius: 12px;">
                    <h6 class="mb-0 text-dark fw-bold">Code Editor</h6>
                    
                    <div class="input-group w-50" style="max-width: 250px;">
                        <select class="form-select border-0 bg-light" id="language" name="language">
                            {% for lang, version in languages.items() %}
                                <option value="{{ lang }}" {% if lang == selected_lang %}selected{% endif %}>
                                    {{ lang.upper() }} 
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                
                <div class="card-body p-0">
                    <textarea id="code-input" name="code_input" class="form-control font-monospace p-3" rows="15" 
                            style="background-color: #1e1e1e; color: #d4d4d4; border: none; resize: none; font-size: 0.9rem;" 
                            required placeholder="// Welcome to Campus 360 Code Practice. Write your solution here...">{{ code }}</textarea>
                </div>
                
                <div class="card-footer bg-light text-end p-3" style="border-bottom-left-radius: 12px; border-bottom-right-radius: 12px;">
                    <button type="submit" class="btn btn-primary fs-5 py-2 px-4">
                        Run Code
                    </button>
                </div>
            </div>
        </form>
    </div>

    <div class="col-md-4">
        <h5 class="fw-bold text-dark mb-3">Output Console</h5>
        <div class="card shadow-sm mb-4">
            <div class="card-body bg-dark text-white font-monospace p-3" style="min-height: 180px; border-radius: 8px;">
                {% if output %}
                    <pre style="white-space: pre-wrap;">{{ output }}</pre>
                {% else %}
                    <p class="text-muted small">Click 'Run Code' to see the output.</p>
                {% endif %}
            </div>
        </div>

        <h5 class="fw-bold text-dark mb-3">Code Status</h5>
        <div class="list-group shadow-sm">
            <div class="list-group-item d-flex justify-content-between align-items-center fw-bold border-0">
                Overall Execution Status
                {% if output and output != "Execution failed or timed out." and output != "Compile Error" %}
                    <span class="badge bg-success rounded-pill">SUCCESS</span>
                {% elif output %}
                    <span class="badge bg-danger rounded-pill">FAILED</span>
                {% else %}
                    <span class="badge bg-secondary rounded-pill">PENDING</span>
                {% endif %}
            </div>
        </div>
        
        <h5 class="fw-bold text-dark mt-4 mb-3">Test Cases (Mock)</h5>
        <div class="list-group shadow-sm">
            <div class="list-group-item d-flex justify-content-between align-items-center small border-0">
                Test Case 1: Hello World
                <span class="badge bg-success rounded-pill">PASSED</span>
            </div>
            <div class="list-group-item d-flex justify-content-between align-items-center small border-0">
                Test Case 2: Custom Input (Mock)
                <span class="badge bg-danger rounded-pill">FAILED</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}